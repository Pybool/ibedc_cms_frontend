<div class="nk-header nk-header-fixed nk-header-fluid">
    <div class="container-fluid">
        <div class="nk-header-wrap">
            <div class="nk-menu-trigger d-xl-none ms-n1"><a href="#" class="nk-nav-toggle nk-quick-nav-icon" data-target="sidebarMenu"><em class="icon ni ni-menu"></em></a></div>
            <div class="nk-header-brand d-xl-none"><a href="index-2.html" class="logo-link"><img class="logo-light logo-img" src="/assets/images/smarthome-logo.jpg" srcset="/demo7/images/logo2x.png 2x" alt="logo"><img class="logo-dark logo-img" src="/assets/images/smarthome-logo.jpg" srcset="/demo7/images/logo-dark2x.png 2x" alt="logo-dark"></a></div>
            <input id="caad-search-bar"  type="text" style="border: 1px solid #dbdfea!important;" class="form-control form-focus-none" placeholder="Search for a caad record">
          
             <div  class="nk-header-tools">
                <ul class="nk-quick-nav">
                    <li>
                        <div class="dropdown">
                            <a id="searchbar_filter" style="height:35px;" href="#" class="btn btn-white btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">Select a Filter&nbsp;&nbsp;<em class="dd-indc icon ni ni-chevron-right"></em></a>
                            <div class="dropdown-menu" >
                                <ul class="link-list-opt">
                                    <li><a href="javascript:void(0)" (click)="caadSearchBarFilter($event)" value = "Account Number" name="account_no">Account Number</a></li>
                                    <li><a href="javascript:void(0)" name="names" (click)="caadSearchBarFilter($event)">Names</a></li>
                                    <li><a href="javascript:void(0)" name="mobile" (click)="caadSearchBarFilter($event)">Phone Number</a></li>
                                    <li><a href="javascript:void(0)" name="email" (click)="caadSearchBarFilter($event)">Email</a></li>
                                    <li><a href="javascript:void(0)" name="address" (click)="caadSearchBarFilter($event)">Address</a></li>
                                    <li><a href="javascript:void(0)" name="buid" (click)="caadSearchBarFilter($event)">Business Unit</a></li>
                                    <li><a href="javascript:void(0)" name="servicecenter" (click)="caadSearchBarFilter($event)">Service Centers</a></li>
                                    <li><a href="javascript:void(0)" name="state" (click)="caadSearchBarFilter($event)">Region</a></li>
                                    <li><a href="javascript:void(0)" name="created_by" (click)="caadSearchBarFilter($event)">Created By</a></li>
                                 </ul>
                            </div>
                        </div>
                    </li>
                    <li class="dropdown user-dropdown">
                        <a href="javascript:void(0)" class="dropdown-toggle me-n1" data-bs-toggle="dropdown">
                            <div class="user-toggle">
                                <div class="user-avatar sm"><em class="icon ni ni-user-alt"></em></div>
                            </div>
                        </a>
                        <div style="width:400px!important;" class="dropdown-menu dropdown-menu dropdown-menu-right">
                            <div class="dropdown-inner user-card-wrap bg-lighter">
                                <div class="user-card">
                                    <div class="user-avatar"><span>{{abbreviateName(user.name)}}</span></div>
                                    <div class="user-info"><span class="lead-text">{{user.name}}</span><span class="sub-text">{{user.email}}</span></div>
                                </div>
                            </div>
                            <div  style="width:500px!important;" class="dropdown-inner">
                                <ul class="link-list-opt">
                                    <li><a style="white-space: nowrap;" *ngIf="user.permission_hierarchy == 'Business Unit'" href="javascript:void(0)"  style="width:100%;">
                                        {{user.position}}: {{user.business_unit | uppercase}}
                                        </a>
                                        <a *ngIf="user.permission_hierarchy == 'Service Center'" href="javascript:void(0)"  style="width:100%;">
                                        {{user.position}}: {{user.service_center | uppercase}}
                                        </a>
                                        <a *ngIf="user.permission_hierarchy == 'Region'" href="javascript:void(0)"  style="width:100%;">
                                        {{user.position}}: {{user.region | uppercase}}
                                        </a>
                                        <a *ngIf="user.permission_hierarchy == 'Head Quarters'" href="javascript:void(0)"  style="width:100%;">
                                        {{user.position}}: {{user.region | uppercase}}
                                        </a>
                                     </li>
                                     <li><a href="javascript:void(0)" ><em class="icon ni ni-signout"></em><span>Region: {{user.region.toUpperCase()}}</span></a></li>
                                     <li *ngIf="user.position.includes('BHM') || user.position.includes('ADT') || user.can_create_customer" ><a href="javascript:void(0)" onclick="document.getElementById('pending_view').click()" style="width:100%;">
                                        <em class="icon ni ni-update"></em>CRMD Customers Board
                                        </a>
                                     </li>
                                     <li><a href="javascript:void(0)" (click)="logout()"><em class="icon ni ni-signout"></em><span>Sign out</span></a></li>
                                  </ul>
                            </div>
                           
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        
    </div>
 </div>

<div style="padding-top: 100px;" class="nk-content ">
    <div class="container-fluid">
        <div class="nk-content-inner">
            <div class="nk-content-body">
                <div class="nk-block-head nk-block-head-sm">
                    <div class="nk-block-between">
                        <div class="nk-block-head-content">
                            <h3 class="nk-block-title page-title">IBEDC CAAD</h3>
                            <div class="nk-block-des text-soft">
                                <p>You have total of {{approvalList.length}} untreated records.</p>
                            </div>
                        </div>
                        <div class="nk-block-head-content">
                            <div class="toggle-wrap nk-block-tools-toggle">
                                <a class="btn btn-icon btn-trigger toggle-expand me-n1" data-target="pageMenu"><em class="icon ni ni-menu-alt-r"></em></a>
                                <div class="toggle-expand-content show" data-content="pageMenu">
                                    <ul class="nk-block-tools g-3">
                                        <li>
                                            <div>
                                            <div class="form-group input-group mb30">
                                                <input type="text" (change)="handler($event);" placeholder="Start date" name="start_date" class="form-control form_control date-widget" onfocus="(this.type='date')" />
                                                <input type="text" (change)="handler($event);" placeholder="End date" name="end_date" class="form-control form_control date-widget" onfocus="(this.type='date')" />
                                            </div>
                                            </div>
                                        </li>
                                        <li><a (click)="newCAAD()" class="btn btn-white btn-outline-light"><em class="icon ni ni-download-cloud"></em><span>New CAAD</span></a></li>
                                        <li class="nk-block-tools-opt">
                                            <a class="dropdown-toggle btn btn-icon btn-primary" data-bs-toggle="dropdown"><em class="icon ni ni-plus"></em></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div style="height:70vh" class="nk-block">
                    <div style="height:70vh" class="card card-bordered">
                        <div style="height:70vh" class="card-inner-group">
                            <div style="max-height:100%;overflow-y:auto;overflow-x:hidden;" class="card-inner position-relative card-tools-toggle">
                                <div>
                                    <div>
                                        <!-- <div class="card-inner position-relative card-tools-toggle">
                                            <div class="card-title-group">
                                                <div class="card-tools">
                                                    <div class="form-inline flex-nowrap gx-3">
                                                        <div class="form-wrap w-150px">
                                                            <select class="form-select" data-search="off" data-placeholder="----" >
                                                                <option value="" data-select2-id="3">Activate</option>
                                                                <option value="email">Activate</option>
                                                                <option value="suspend">Suspend queue</option>
                                                            </select>
                                                        </div>
                                                        <div class="btn-wrap"><span class="d-none d-md-block"><button  class="btn btn-dim btn-outline-light">Toggle View</button></span><span class="d-md-none"><button class="btn btn-dim btn-outline-light btn-icon disabled"><em class="icon ni ni-arrow-right"></em></button></span></div>
                                                    </div>
                                                </div>
                                                <div class="card-tools me-n1">
                                                    <ul class="btn-toolbar gx-1">
                                                        <li><a href="#" class="btn btn-icon search-toggle toggle-search" data-target="search"><em class="icon ni ni-search"></em></a></li>
                                                        <li class="btn-toolbar-sep"></li>
                                                        <li>
                                                            <div class="toggle-wrap">
                                                                <a href="#" class="btn btn-icon btn-trigger toggle" data-target="cardTools"><em class="icon ni ni-menu-right"></em></a>
                                                                <div class="toggle-content" data-content="cardTools">
                                                                    <ul class="btn-toolbar gx-1">
                                                                        <li class="toggle-close"><a href="#" class="btn btn-icon btn-trigger toggle" data-target="cardTools"><em class="icon ni ni-arrow-left"></em></a></li>
                                                                        <li>
                                                                            <div class="dropdown">
                                                                                <a href="#" class="btn btn-trigger btn-icon dropdown-toggle" data-bs-toggle="dropdown">
                                                                                    <div class="dot dot-primary"></div>
                                                                                    <em class="icon ni ni-filter-alt"></em>
                                                                                </a>
                                                                                
                                                                            </div>
                                                                        </li>
                                                                        <li>
                                                                            <div class="dropdown">
                                                                                <a href="#" class="btn btn-trigger btn-icon dropdown-toggle" data-bs-toggle="dropdown"><em class="icon ni ni-setting"></em></a>
                                                                                <div class="dropdown-menu dropdown-menu-xs dropdown-menu-end">
                                                                                    <ul class="link-check">
                                                                                        <li><span>Show</span></li>
                                                                                        <li class="active"><a href="#">10</a></li>
                                                                                        <li><a href="#">20</a></li>
                                                                                        <li><a href="#">50</a></li>
                                                                                    </ul>
                                                                                    <ul class="link-check">
                                                                                        <li><span>Order</span></li>
                                                                                        <li class="active"><a href="#">DESC</a></li>
                                                                                        <li><a href="#">ASCs</a></li>
                                                                                    </ul>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="card-search search-wrap" data-search="search">
                                                <div class="card-body">
                                                    <div class="search-content"><a href="#" class="search-back btn btn-icon toggle-search" data-target="search"><em class="icon ni ni-arrow-left"></em></a><input type="text" class="form-control border-transparent form-focus-none" placeholder="Search by queue or email"><button class="search-submit btn btn-icon"><em class="icon ni ni-search"></em></button></div>
                                                </div>
                                            </div>
                                        </div> -->
                                        <div style="height:60vh; overflow-y:auto" class="card-inner p-0">
                                            <div id="search-status" class="card-tools me-n1">
                     
                                            </div>
                                            <div class="nk-tb-list nk-tb-ulist is-compact">
                                                <div class="nk-tb-item nk-tb-head">
                                                    <div class="nk-tb-col nk-tb-col-check">
                                                        <div class="custom-control custom-control-sm custom-checkbox notext">
                                                            <input onClick="toggle(this)" type="checkbox" class="custom-control-input" id="uid"/>
                                                            <label class="custom-control-label" for="uid"></label>
                                                        </div>
                                                    </div>
                                                     <div class="nk-tb-col"><span><b>Name</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Account No</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Region</b></span></div>
                                                    <div class="nk-tb-col"><span><b>BizHub</b></span></div>
                                                    <div class="nk-tb-col"><span><b>ServiceCenter</b></span></div>
                                                    <div class="nk-tb-col"><span><b>TotalAccrued</b></span></div>
                                                    <div class="nk-tb-col"><span><b>VAT</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Outstanding</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Refund Amount</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Is Metered</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Total Estimate</b></span></div>
                                                    <div class="nk-tb-col"><span><b>CreatedBy</b></span></div>
                                                    <div class="nk-tb-col"><span><b>CreatedDate</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Completion</b></span></div>
                                                    <div class="nk-tb-col"><span><b>Actions</b></span></div>
                                                </div>
                                                
                                                <ng-container *ngFor="let approvalItem of approvalList" t-as="approvalList">
                                                    <div  t-att-value="approvalItem.account_no" t-att-id="'row_'+str(approvalItem.id)" class="nk-tb-item">
                                                        <div class="nk-tb-col nk-tb-col-check">
                                                            <div class="custom-control custom-control-sm custom-checkbox notext">
                                                                <input t-att-value="approvalItem.customer_name" type="checkbox" class="custom-control-input check_locations" t-att-id="approvalItem.id"/>
                                                                <label class="custom-control-label" t-att-for="approvalItem.customer_name"></label>
                                                                &nbsp;<div _ngcontent-mym-c60="" class="user-avatar sm"  [ngStyle]="{'background': 'linear-gradient(to bottom, #' + getRandomColor() + ', #' + getRandomColor() + ')'}"><p _ngcontent-mym-c60="" class="abbr" style="color: white!important;">{{abbreviateName(approvalItem.customer_name?.replaceAll('null ',''))}}</p><!--bindings={
                                                                    "ng-reflect-ng-if": "true"
                                                                  }--></div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="nk-tb-col">
                                                            <span style="white-space: nowrap;" class="bold" t-esc="approvalItem.customer_name"><b>{{approvalItem.customer_name?.replaceAll('null ','')}}</b></span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <a style="white-space: nowrap;" class="bold route-link" href="javascript:void(0)" (click)="loadCustomerInformation($event,approvalItem.account_no)">{{approvalItem.account_no}}</a>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.customer_name">{{approvalItem.region | titlecase}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.accountno">{{approvalItem.buid | titlecase }}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.buid">{{approvalItem.servicecenter | titlecase}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.total_accrued">{{approvalItem.total_accrued}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.vat">{{approvalItem.vat}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.current_outstanding_bal">{{approvalItem.current_outstanding_bal}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.refund_amount">{{approvalItem.refund_amount}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.is_metered">{{approvalItem.is_metered}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.total_estimate">{{approvalItem.total_estimate}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.total_estimate">{{approvalItem.created_by}}</span>
                                                        </div>
                                                        <div class="nk-tb-col">
                                                            <span class="bold" t-esc="approvalItem.total_estimate">{{approvalItem.created_date}}</span>
                                                        </div>
                                                        
                                                        <div class="nk-tb-col">
                                                            <span style="color:orangered;font-size:16px;" class="bold" t-esc="approvalItem.percentage">{{approvalItem?.percentage_approval + '%'}}</span>
                                                        </div>
                                                        <div class="nk-tb-col nk-tb-col-tools">
                                                            <ul class="nk-tb-actions gx-2">
                                                                <li>
                                                                    <div class="drodown">
                                                                        <a href="#" class="btn btn-sm btn-icon btn-trigger dropdown-toggle" data-bs-toggle="dropdown"><em class="icon ni ni-more-h"></em></a>
                                                                        <div class="dropdown-menu dropdown-menu-end">
                                                                            <ul class="link-list-opt no-bdr">
                                                                                <li  value="{{approvalItem.id}}"><a href="javascript:void(0)" (click)="viewCaadRecord($event,approvalItem.id)"><em class="icon ni ni-eye"></em><span>View Details</span></a></li>
                                                                                <li class="divider"></li>
                                                                                <!-- <li  value="{{approvalItem.id}}"><a href="javascript:void(0)"><em class="icon ni ni-shield-off"></em><span>Revert</span></a></li>
                                                                                <li  value="{{approvalItem.id}}"><a href="javascript:void(0)"><em class="icon ni ni-na"></em><span>Approve</span></a></li> -->
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        
                                                    </div><!-- .nk-tb-item -->
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <app-pagination (dataEvent)="receivePaginationData($event)"></app-pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CAAD CREATION COMPONENT -->

<div id="caad_creation" style="border-left:2px solid ;height:80%;width:80%;border-color:#FF7518; right: 1px; bottom: 1px;" class="nk-add-product toggle-slide toggle-slide-right" data-content="" data-toggle-screen="any" data-toggle-overlay="true" data-toggle-body="true" data-simplebar='1'>
    <div class="nk-block-head">
       <div class="nk-block-head-content">
          <h5 id="create_edit_user_title" class="nk-block-title"></h5>
          <div class="nk-block-des">
             <div class="data-head">
                <h5 id="form_title" class="overline-title">CAAD CREATION</h5>
             </div>
          </div>
          
       </div>
    </div>
    <!-- .nk-block-head -->
    <div class="nk-block">
        <app-caad></app-caad>
    </div>
 </div>


<div id="caad_approval" style="border-left:2px solid ;height:80%;width:80%;border-color:#FF7518; right: 1px; bottom: 1px;" class="nk-add-product toggle-slide toggle-slide-right" data-content="editCustomer" data-toggle-screen="any" data-toggle-overlay="true" data-toggle-body="true" data-simplebar='1'>
    <div class="nk-block-head">
       <div class="nk-block-head-content">
          <h5 id="create_edit_user_title" class="nk-block-title"></h5>
          <div class="nk-block-des">
             <div class="data-head">
                <h5 id="form_title" class="overline-title">CAAD Approval Sequence</h5>
             </div>
          </div>
          
       </div>
    </div>
    <!-- .nk-block-head -->
    <div class="nk-block">
        <div id="accordion" class="accordion">
            <div class="accordion-item">
                <a id="asset_information_accordion" href="javascript:void(0)" class="accordion-head" data-bs-toggle="collapse" data-bs-target="#accordion-item-4">
                   <h6 class="title">CAAD Line Items</h6>
                   <span class="accordion-icon"></span>      
                </a>
                <div class="accordion-body collapse" id="accordion-item-4" data-bs-parent="#accordion">
                   <div style="padding:0px;" class="accordion-inner">
                     <form class="form-validate is-alter" autocomplete="off" (ngSubmit)="submit()" ngNativeValidate>
                         <div style="width:95%; overflow-x:scroll">
                            <table style="width:100%; text-align:center;overflow-x: hidden;" id="caad_line_items_table" class="datatable-init dataTable nowrap nk-tb-list is-separate shadow" data-auto-responsive="true">
                                <thead class="" style="position:sticky;top:0;">
                                    <th id='checkbox-th' style="display:none;">.</th>
                                    <th><b>From</b></th>
                                    <th><b>To</b></th>
                                    <th><b>Months</b></th>
                                    <th><b>Tarrif</b></th>
                                    <ng-container *ngIf="is_metered">
                                        <th><b>Present Reading</b></th>
                                        <th><b>Last Actual Reading</b></th>
                                        <th><b>Consumed</b></th>
                                    </ng-container>
                                    <th><b>Recom Unit</b></th>
                                    <th><b>MAB</b></th>
                                    <th><b>EBM</b></th>
                                    <th><b></b></th>
                                </thead>
                                <tbody>
                                    <ng-container *ngIf="is_metered">
                                        <tr *ngFor="let lineItem of lineItems; trackBy: trackByFn" [id]="'caad-line-item_'+ lineItem.index" style="height:30px;padding:5px!important;align-items:center;justify-content:center;" class="nk-tb-item is-separate">
                                            <!-- <td class="nk-tb-col nk-tb-col-check">
                                                <div style="z-index:1;" class="custom-control custom-control-sm custom-checkbox notext ">
                                                    <div class="custom-control custom-control-sm custom-checkbox notext">
                                                        <input type="checkbox" class="custom-control-input error-lineitem" id="err-flag_1">
                                                        <label class="custom-control-label" for="err-flag_1"></label>
                                                    </div>
                                                </div>
                                            </td> -->
                                            <td  class="nk-tb-col date"><input [disabled]="true" [(ngModel)]="lineItem.from_date" [ngModelOptions]="{standalone: true}" name="'from_'+ lineItem.index" class="form-control line_item_from_date" style="width:100%;" type="date"  placeholder="From date"></td>
                                            <td  class="nk-tb-col date"><input [disabled]="true" [id]="'to_'+ lineItem.index" disabled [(ngModel)]="lineItem.to_date" [ngModelOptions]="{standalone: true}" [name]="'to_'+ lineItem.index" class="form-control line_item_to_date" style="width:100%;" type="date"  placeholder="To date" onfocus="(this.type='date')"></td>
                                            <td class="nk-tb-col"><input disabled type="text" [(ngModel)]="lineItem.months" [ngModelOptions]="{standalone: true}" name="'months_'+ lineItem.index" class="caadmonths form-control" id="caad-months"/></td>
                                            <td class="nk-tb-col"><select [disabled]="true" [(ngModel)]="lineItem.tarrif" style="width:200px;" [ngModelOptions]="{standalone: true}" name="1"  class="form-select"><option></option><option value="24.5">24.5</option><option value="38.7">38.7</option></select></td>
                                            <td class="nk-tb-col"><input [disabled]="true" [disabled]="true" [(ngModel)]="lineItem.present_reading" [ngModelOptions]="{standalone: true}" id="" name="1" class="present-reading form-control"  type="text"></td>
                                            <td class="nk-tb-col"><input [disabled]="true"  [(ngModel)]="lineItem.last_actual_reading" [ngModelOptions]="{standalone: true}" id="" name="1" class="last-actual-reading form-control"  type="text"></td>
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.consumed" [ngModelOptions]="{standalone: true}" name="1" class="form-control consumed" readonly="1" type="text" value=""></td>
                                                            
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.recom_unit" [ngModelOptions]="{standalone: true}" disabled="1" name="1"  class="form-control recoms" type="text"></td>
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.mab" [ngModelOptions]="{standalone: true}" name="1" class="form-control" readonly="1" type="text" value=""></td>
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.ebm" [ngModelOptions]="{standalone: true}" type="text" disabled class="form-control" class="ebm" name="1"/></td>
                                            <td class="pointer"><i class="material-icons">delete</i></td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="!is_metered">
                                        <tr *ngFor="let lineItem of lineItems;" [id]="'caad-line-item_'+ lineItem.index" style="height:30px;padding:5px!important;align-items:center;justify-content:center;" class="nk-tb-item is-separate">
                                            <!-- <td class="nk-tb-col nk-tb-col-check">
                                                <div style="z-index:1;" class="custom-control custom-control-sm custom-checkbox notext ">
                                                    <div class="custom-control custom-control-sm custom-checkbox notext">
                                                        <input type="checkbox" class="custom-control-input error-lineitem" id="err-flag_1">
                                                        <label class="custom-control-label" for="err-flag_1"></label>
                                                    </div>
                                                </div>
                                            </td> -->
                                            <td  class="nk-tb-col date"><input [disabled]="true" [(ngModel)]="lineItem.from_date" [ngModelOptions]="{standalone: true}" name="'from_'+ lineItem.index"  class="form-control line_item_from_date" style="width:100%;" type="date"  placeholder="From date"></td>
                                            <td  class="nk-tb-col date"><input [disabled]="true" [id]="'to_'+ lineItem.index" disabled [(ngModel)]="lineItem.to_date" [ngModelOptions]="{standalone: true}" [name]="'to_'+ lineItem.index" class="form-control line_item_to_date" style="width:100%;" type="date" placeholder="To date" onfocus="(this.type='date')"></td>
                                            <td class="nk-tb-col"><input disabled type="text" [(ngModel)]="lineItem.months" [ngModelOptions]="{standalone: true}" name="'months_'+ lineItem.index" class="caadmonths form-control" id="caad-months"/></td>
                                            <td class="nk-tb-col"><select [disabled]="true" [(ngModel)]="lineItem.tarrif" style="width:200px;" [ngModelOptions]="{standalone: true}" name="1" class="form-select"><option></option><option value="24.5">24.5</option><option value="38.7">38.7</option></select></td>
                                            
                                            <td class="nk-tb-col"><input [disabled]="true" [(ngModel)]="lineItem.recom_unit" [ngModelOptions]="{standalone: true}" name="1"  class="form-control recoms" type="text"></td>
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.mab" [ngModelOptions]="{standalone: true}" name="1" class="form-control" readonly="1" type="text" value=""></td>
                                            <td class="nk-tb-col"><input [(ngModel)]="lineItem.ebm" [ngModelOptions]="{standalone: true}" type="text" disabled class="form-control" class="ebm" name="1"/></td>
                                            <td class="pointer"><i class="material-icons">delete</i></td>
                                        </tr>
                                    </ng-container>
                                  
                                </tbody>
                               
                                <input id="is_metered" hidden="1" type="text" t-att-value="customerdata['is_metered']"/>
                                <input id="caad_rows_count" hidden="1" type="text"/>
                            </table>
                         </div>
                         <br>
                         <div class="col-12 row g-3">
                             <ul style="padding:10px;" class="nk-block-tools g-3 col-8">
                                 
                                 <li><button (click)="approveCaad($event)" type="submit" class="btn btn-success btn-outline-light"><em style="color:white;" class="icon ni ni-download-cloud"></em><span style="color:white;">Approve</span></button></li>
                                 
                                 <li><button (click)="revertCaad($event)" class="btn btn-warning btn-outline-light"><em style="color:white;" class="icon ni ni-download-cloud"></em><span style="color:white;">Decline</span></button></li>

                                </ul>
                                <textarea *ngIf="decline" (keyup.enter)="submitDecline()" id="comments" rows="4" cols="50" type="text" class="form-control shadow col-4"  placeholder="Enter a comment to decline this record and press enter to submit!"></textarea>

                             <ul id="calculations" style="max-height:50vh;overflow-y: auto;" class="link-list-opt col-4">
                                 <li ><div class="col-12 row g-3"><label class="col-6">Summation Expected Billing</label><a class="col-6" href="javascript:void(0)" ><input [value]="sebm" type="text" class="input-display"/></a></div></li>
                                 <li ><div class="col-12 row g-3"><label class="col-6">Total Expected Billing (Vat: 0.0%)</label><a class="col-6" href="javascript:void(0)" ><input [value]="tebm" type="text" class="input-display"/></a></div></li>
                                 <li ><div class="col-12 row g-3"><label class="col-6">Refund Amount</label><a class="col-6" href="javascript:void(0)" ><input [value]="refundAmount" type="text" class="input-display"/></a></div></li>
                                 
                             </ul>
                         </div>
                        
                     </form>
                     
                   </div>
                   

                </div>
             </div>
             <div class="accordion-item">
                <a id="asset_information_accordion" href="javascript:void(0)" class="accordion-head" data-bs-toggle="collapse" data-bs-target="#accordion-item-5">
                    <h6 class="title">Recent Approvers List</h6>
                    <span class="accordion-icon"></span>      
                 </a>
                 <div class="accordion-body collapse" id="accordion-item-5" data-bs-parent="#accordion">
                    <div style="padding:0px;" class="accordion-inner">
                        <div style="height:40vh" class="nk-block">
                            <div style="height:40vh" class="card card-bordered">
                                <div style="height:40vh" class="card-inner-group">
                                    <div style="max-height:100%;overflow-y:auto;overflow-x:hidden;" class="card-inner position-relative card-tools-toggle">
                                        <div>
                                            <div>
                                                <div style="height:40vh; overflow-y:auto" class="card-inner p-0">
                                                    <div class="nk-tb-list nk-tb-ulist is-compact">
                                                        <div class="nk-tb-item nk-tb-head">
                                                            <div class="nk-tb-col nk-tb-col-check">
                                                                <div class="custom-control custom-control-sm custom-checkbox notext">
                                                                    <input onClick="toggle(this)" type="checkbox" class="custom-control-input" id="uid"/>
                                                                    <label class="custom-control-label" for="uid"></label>
                                                                </div>
                                                            </div>
                                                            <div class="nk-tb-col"><span><b>Approver Name</b></span></div>
                                                            <div class="nk-tb-col"><span><b>Position</b></span></div>
                                                            <div class="nk-tb-col"><span><b>email</b></span></div>
                                                            <div class="nk-tb-col"><span><b>Approval Date</b></span></div>
                                                            <div class="nk-tb-col"><span><b>Comments</b></span></div>
                                                            
                                                        </div>
                                                        
                                                        <ng-container *ngFor="let approver of approvers" >
                                                            <div  class="nk-tb-item">
                                                                <div class="nk-tb-col nk-tb-col-check">
                                                                    <div class="custom-control custom-control-sm custom-checkbox notext">
                                                                        <input value="approver.email" type="checkbox" class="custom-control-input check_locations" id="approver.email"/>
                                                                        <label class="custom-control-label" for="approver.email"></label>
                                                                    </div>
                                                                </div>
                                                                <div class="nk-tb-col">
                                                                    <span class="bold" t-esc="approvalItem.customer_name"><b>{{approver.approver_name | titlecase}}</b></span>
                                                                </div>
                                                                <div class="nk-tb-col">
                                                                    <span class="bold" t-esc="approvalItem.accountno">{{approver.approver_position}}</span>
                                                                </div>
                                                                <div class="nk-tb-col">
                                                                    <span class="bold" t-esc="approvalItem.customer_name"><b>{{approver.approver_email}}</b></span>
                                                                </div>
                                                                <div class="nk-tb-col">
                                                                    <span class="bold" t-esc="approvalItem.accountno">{{approver.date_approved }}</span>
                                                                </div>
                                                                <div class="nk-tb-col">
                                                                    <span class="bold" t-esc="approvalItem.accountno">{{approver.comments }}</span>
                                                                </div>
                                                                
                                                                                                                        
                                                            </div><!-- .nk-tb-item -->
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                    </div>
                 </div>
                 
             </div>
        </div>
        <br>
        <button (click)="exit($event)" type="button" class="btn btn-success btn-outline-light"><em style="color:white;" class="icon ni ni-download-cloud"></em><span style="color:white;">Exit</span></button>
     
    </div>
 </div>


 


