<div class="nk-header nk-header-fixed nk-header-fluid">
   <div class="container-fluid">
       <div class="nk-header-wrap">
           <div class="nk-menu-trigger d-xl-none ms-n1"><a href="#" class="nk-nav-toggle nk-quick-nav-icon" data-target="sidebarMenu"><em class="icon ni ni-menu"></em></a></div>
           <div class="nk-header-brand d-xl-none"><a href="index-2.html" class="logo-link"><img class="logo-light logo-img" src="/assets/images/smarthome-logo.jpg" srcset="/demo7/images/logo2x.png 2x" alt="logo"><img class="logo-dark logo-img" src="/assets/images/smarthome-logo.jpg" srcset="/demo7/images/logo-dark2x.png 2x" alt="logo-dark"></a></div>
           
           
            
         <input id="payment-history-search-bar" type="text" style="border: 1px solid #dbdfea!important;" class="form-control form-focus-none" placeholder="Search for a payment record">
         
            <div  class="nk-header-tools">
               <ul class="nk-quick-nav">
                   <li>
                       <div class="dropdown">
                           <a id="searchbar_filter" style="height:35px;" href="#" class="btn btn-white btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">Select a Filter&nbsp;&nbsp;<em class="dd-indc icon ni ni-chevron-right"></em></a>
                           <div class="dropdown-menu" >
                              <ul  class="link-list-opt">
                                 <li><a href="javascript:void(0)" (click)="paymentSearchBarFilter($event)" value = "Account Number" name="accountno">Account Number</a></li>
                                 <li><a href="javascript:void(0)" value = "Meter Number" name="MeterNo" (click)="paymentSearchBarFilter($event)">Meter Number</a></li>
                                 <li><a href="javascript:void(0)" value = "Customer ID" name="CustomerID" (click)="paymentSearchBarFilter($event)">Customer ID</a></li>
                                 <li><a href="javascript:void(0)" value = "Payment ID" name="PaymentID" (click)="paymentSearchBarFilter($event)">Payment ID</a></li>
                                 <li><a href="javascript:void(0)" value = "Bill ID" name="BillID" (click)="paymentSearchBarFilter($event)">Bill ID</a></li>
                                 <li><a href="javascript:void(0)" value = "Payment Trans ID" name="PaymentTransactionId" (click)="paymentSearchBarFilter($event)">Payment Trans ID</a></li>
                                 <li><a href="javascript:void(0)" value = "Receipt Number" name="receiptnumber" (click)="paymentSearchBarFilter($event)">Receipt Number</a></li>
                              </ul>
                           </div>
                       </div>
                   </li>
                   <li class="dropdown user-dropdown">
                       <a href="javascript:void(0)" class="dropdown-toggle me-n1" data-bs-toggle="dropdown">
                           <div class="user-toggle">
                               <div class="user-avatar sm"><em class="icon ni ni-user-alt"></em></div>
                           </div>
                       </a>
                       <div style="width:400px!important;" class="dropdown-menu dropdown-menu dropdown-menu-right">
                           <div class="dropdown-inner user-card-wrap bg-lighter">
                               <div class="user-card">
                                   <div class="user-avatar"><span>{{abbreviateName(user.name)}}</span></div>
                                   <div class="user-info"><span class="lead-text">{{user.name}}</span><span class="sub-text">{{user.email}}</span></div>
                               </div>
                           </div>
                           <div  style="width:500px!important;" class="dropdown-inner">
                               <ul class="link-list-opt">
                                   <li><a style="white-space: nowrap;" *ngIf="user.permission_hierarchy == 'Business Unit'" href="javascript:void(0)"  style="width:100%;">
                                       {{user.position}}: {{user.business_unit | uppercase}}
                                       </a>
                                       <a *ngIf="user.permission_hierarchy == 'Service Center'" href="javascript:void(0)"  style="width:100%;">
                                       {{user.position}}: {{user.service_center | uppercase}}
                                       </a>
                                       <a *ngIf="user.permission_hierarchy == 'Region'" href="javascript:void(0)"  style="width:100%;">
                                       {{user.position}}: {{user.region | uppercase}}
                                       </a>
                                       <a *ngIf="user.permission_hierarchy == 'Head Quarters'" href="javascript:void(0)"  style="width:100%;">
                                       {{user.position}}: {{user.region | uppercase}}
                                       </a>
                                    </li>
                                    <li><a href="javascript:void(0)" ><em class="icon ni ni-signout"></em><span>Region: {{user.region.toUpperCase()}}</span></a></li>
                                    <li *ngIf="user.position.includes('BHM') || user.position.includes('ADT') || user.can_create_customer"><a href="javascript:void(0)" onclick="document.getElementById('pending_view').click()" style="width:100%;">
                                       <em class="icon ni ni-update"></em>CRMD Customers Board
                                       </a>
                                    </li>
                                    <li><a href="javascript:void(0)" (click)="logout()"><em class="icon ni ni-signout"></em><span>Sign out</span></a></li>
                                 </ul>
                           </div>
                          
                       </div>
                   </li>
               </ul>
           </div>
       </div>
       
   </div>
</div>

<div id="customers_template" style="padding-top: 100px;" class="nk-content ">
    <div class="nk-block-head nk-block-head-sm">
       <div class="nk-block-between">
          <div class="nk-block-head-content">
             <div class="header-start">
                
                <h3 id="dashboardtitle" class="nk-block-title page-title">Today Collections (Postpaid)</h3>
               
                <ul class="tagList" id="search-tag-list">
                  <li class="option-item "><a style="color:gray;" href="javascript:void(0)" id="cust-page-link1">Total: 1,600,418</a></li>
                  </ul>
             </div>
          </div>
        
          <!-- .nk-block-head-content -->
          <div class="nk-block-head-content">
             <div class="toggle-wrap nk-block-tools-toggle">
                <a href="#" class="btn btn-icon btn-trigger toggle-expand mr-n1" data-target="pageMenu"><em class="icon ni ni-more-v"></em></a>
                <div  class="toggle-expand-content" data-content="pageMenu">
                    <ul class="nk-block-tools g-3">
                        <li>
                            <div>
                            <div class="form-group input-group mb30">
                                <input type="text" onchange="handler();" placeholder="Start date" name="start_date" class="form-control form_control date-widget" onfocus="(this.type='date')" />
                                <input type="text" onchange="handler();" placeholder="End date" name="end_date" class="form-control form_control date-widget" onfocus="(this.type='date')" />
                            </div>
                            </div>
                        </li>
                    </ul>
                </div>
             </div>
          </div>
       </div>
       <!-- .nk-block-between -->
    </div>
    <div style="height:98%" class="nk-block">
        <div class="card card-bordered">
          <div class="card-inner-group">
             <div style="max-height:850px;overflow-y:auto;overflow-x:hidden;" class="card-inner position-relative card-tools-toggle">
                <div class="card-title-group">
                   <div class="card-tools">
                      <div class="form-inline flex-nowrap">
                         <!-- <div class="form-wrap w-150px">
                            <select style="width:150px;" class="form-select" data-search="off" data-placeholder="Oyo" >
                               <option value="" data-select2-id="3">Oyo</option>
                               <option value="email">Osun</option>
                               <option value="group">Ogun</option>
                               <option value="suspend">Kwara</option>
                            </select>
                         </div>&nbsp; -->
                         <div class="btn-wrap"><span class="d-none d-md-block"><a [routerLink]="['/cms/today/prepaid/collections']" href="javascript:void(0)"  class="btn btn-dim btn-outline-light">Go to Prepaid</a></span><span class="d-md-none"><button class="btn btn-dim btn-outline-light btn-icon disabled"><em class="icon ni ni-arrow-right"></em></button></span></div>
                      </div>
                   </div>
                   <div id="postpaid-todaycols-spinner-wrapper" class="card-tools me-n1">
                      
                   </div>
                </div> 
 
                <div class="nk-block" id="customers_list_view">
                   <div style="max-width:100%; height:100%">
                      <div style="width:100%; height:80%;overflow-y:hidden;">
                         <div style="width:100%;border-radius:0px;margin-top:10px; background:transparent" class="top-panel">
                            <div  class="panel-start flex-row"></div>
                         </div>
                         <div id="postpaid-collections-wrapper" style="width:auto;max-height: 60vh; overflow-y: auto;overflow-x:hidden; background:transparent!important;">
                            
                            <table role="grid" style="width:100%;background:#f5f6fa;overflow: auto;opacity: 0;" id="today-cols-payments-ems-history_table" class="nowrap nk-tb-list is-separate shadow no-footer dtr-inline responsive collapsed" data-searching="false" data-auto-responsive="true">
                               <thead style="position:sticky;top:0;z-index:4000;" class="table-style-dark table-dark">
                                 
                                  <tr>
                                    <th *ngFor="let header of emsheaders" class="nk-tb-col">{{header}}</th>
                                 </tr>
                               </thead>
                               
                               <tbody style="background:#f5f6fa;">
                                    <tr style="background: white!important;height:60px;" class="nk-tb-item" class="nk-tb-item" *ngFor="let payment of payments;">
                                        <td class="nk-tb-col">{{payment?.Surname+(payment?.OtherNames || payment?.othernames)}}</td>
                                        <td class="nk-tb-col"><a class="route-link" href="javascript:void(0)" (click)="loadCustomerInformation($event,payment.AccountNo,payment.MeterNo,'Postpaid')">{{payment.AccountNo}}</a></td> 

                                        <td class="nk-tb-col">{{payment.receiptnumber}}</td>
                    
                                        <td class="nk-tb-col">{{payment.MeterNo || 'N/A'}}</td>
                                        <td class="nk-tb-col">{{payment.PayDate}}</td>
                                        <td class="nk-tb-col">{{payment.Payments}}</td>
                                        <td class="nk-tb-col">{{payment.BusinessUnit}}</td>
                    
                                        <td class="nk-tb-col">{{payment.transamount}}</td>
                                        <td class="nk-tb-col">{{payment.transstatus}}</td>
                                        <td class="nk-tb-col">{{payment.PaymentID}}</td>
                                        <td class="nk-tb-col">{{payment.PaymentTransactionId}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                         </div>
                      </div>
                   </div>
                </div>
                <script type="text/javascript" src="/assets/js/datatables.js"></script>
            
    </div>
    <app-pagination (dataEvent)="receivePaginationData($event)"></app-pagination>
 </div>

 